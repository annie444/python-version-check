import e from"./python-version-check.ebf2a848.js";import t from"./python-version-check.c2bfca41.js";import n from"./python-version-check.32039d93.js";import r from"./python-version-check.db8ab2ec.js";import s from"./python-version-check.bf240021.js";import i from"./python-version-check.3b10f8a1.js";import o from"./python-version-check.dba5a2d4.js";import c from"./python-version-check.8a1cf8f2.js";import h from"./python-version-check.dc34f68e.js";import p from"./python-version-check.e16482cf.js";var a={},f=e.kClients,k=$kquNL$pythonversioncheck32039d93js.kAgent,u=$kquNL$pythonversioncheck32039d93js6.kMockAgentSet,d=$kquNL$pythonversioncheck32039d93js5.kMockAgentGet,H=$kquNL$pythonversioncheck32039d93js1.kDispatches,_=$kquNL$pythonversioncheck32039d93js4.kIsMockActive,l=$kquNL$pythonversioncheck32039d93js7.kNetConnect,g=$kquNL$pythonversioncheck32039d93js3.kGetNetConnect,m=n.kOptions,A=$kquNL$pythonversioncheck32039d93js2.kFactory,y=i.matchValue,v=$kquNL$pythonversioncheck3b10f8a1js.buildMockOptions,$=$kquNL$pythonversioncheckdba5a2d4js.InvalidArgumentError,b=o.UndiciError;class E{constructor(e){this.value=e}deref(){return this.value}}a=class extends c{constructor(e){if(super(e),this[l]=!0,this[_]=!0,e&&e.agent&&"function"!=typeof e.agent.dispatch)throw new $("Argument opts.agent must implement Agent");let n=e&&e.agent?e.agent:new t(e);this[k]=n,this[f]=n[f],this[m]=v(e)}get(e){let t=this[d](e);return t||(t=this[A](e),this[u](e,t)),t}dispatch(e,t){return this.get(e.origin),this[k].dispatch(e,t)}async close(){await this[k].close(),this[f].clear()}deactivate(){this[_]=!1}activate(){this[_]=!0}enableNetConnect(e){if("string"==typeof e||"function"==typeof e||e instanceof RegExp)Array.isArray(this[l])?this[l].push(e):this[l]=[e];else if(void 0===e)this[l]=!0;else throw new $("Unsupported matcher. Must be one of String|Function|RegExp.")}disableNetConnect(){this[l]=!1}get isMockActive(){return this[_]}[u](e,t){this[f].set(e,new E(t))}[A](e){let t=Object.assign({agent:this},this[m]);return this[m]&&1===this[m].connections?new r(e,t):new s(e,t)}[d](e){let t=this[f].get(e);if(t)return t.deref();if("string"!=typeof e){let t=this[A]("http://localhost:9999");return this[u](e,t),t}for(let[t,n]of Array.from(this[f])){let r=n.deref();if(r&&"string"!=typeof t&&y(t,e)){let t=this[A](e);return this[u](e,t),t[H]=r[H],t}}}[g](){return this[l]}pendingInterceptors(){return Array.from(this[f].entries()).flatMap(([e,t])=>t.deref()[H].map(t=>({...t,origin:e}))).filter(({pending:e})=>e)}assertNoPendingInterceptors({pendingInterceptorsFormatter:e=new p}={}){let t=this.pendingInterceptors();if(0===t.length)return;let n=new h("interceptor","interceptors").pluralize(t.length);throw new b(`
${n.count} ${n.noun} ${n.is} pending:

${e.format(t)}
`.trim())}};export{a as default};
//# sourceMappingURL=python-version-check.252dd520.js.map
