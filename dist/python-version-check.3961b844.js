import e from"./python-version-check.c435cc7f.js";import t from"./python-version-check.8e226539.js";import r from"./python-version-check.a30f15a5.js";var o={},n=o&&o.__awaiter||function(e,t,r,o){return new(r||(r=Promise))(function(n,i){function a(e){try{c(o.next(e))}catch(e){i(e)}}function s(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,s)}c((o=o.apply(e,t||[])).next())})};Object.defineProperty(o,"__esModule",{value:!0}),o.OidcClient=void 0;class i{static createHttpClient(r=!0,o=10){return new e.HttpClient("actions/oidc-client",[new t.BearerCredentialHandler(i.getRequestToken())],{allowRetries:r,maxRetries:o})}static getRequestToken(){let e=process.env.ACTIONS_ID_TOKEN_REQUEST_TOKEN;if(!e)throw Error("Unable to get ACTIONS_ID_TOKEN_REQUEST_TOKEN env variable");return e}static getIDTokenUrl(){let e=process.env.ACTIONS_ID_TOKEN_REQUEST_URL;if(!e)throw Error("Unable to get ACTIONS_ID_TOKEN_REQUEST_URL env variable");return e}static getCall(e){var t;return n(this,void 0,void 0,function*(){let r=i.createHttpClient(),o=null==(t=(yield r.getJson(e).catch(e=>{throw Error(`Failed to get ID Token. 
 
        Error Code : ${e.statusCode}
 
        Error Message: ${e.message}`)})).result)?void 0:t.value;if(!o)throw Error("Response json body do not have ID Token field");return o})}static getIDToken(e){return n(this,void 0,void 0,function*(){try{let t=i.getIDTokenUrl();if(e){let r=encodeURIComponent(e);t=`${t}&audience=${r}`}(0,$d4EGd$pythonversionchecka30f15a5js.debug)(`ID token url is ${t}`);let o=yield i.getCall(t);return(0,r.setSecret)(o),o}catch(e){throw Error(`Error message: ${e.message}`)}})}}o.OidcClient=i;export{o as default};
//# sourceMappingURL=python-version-check.3961b844.js.map
