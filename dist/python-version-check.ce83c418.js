let e;import t from"./python-version-check.dba5a2d4.js";import r from"./python-version-check.7ed1514e.js";import*as s from"assert";import{Readable as o}from"stream";var n={},a=o,i=t.RequestAbortedError,l=$l2MzW$pythonversioncheckdba5a2d4js1.NotSupportedError,c=$l2MzW$pythonversioncheckdba5a2d4js.InvalidArgumentError,h=$l2MzW$pythonversioncheck7ed1514ejs2.ReadableStreamFrom,u=r.toUSVString;let d=Symbol("kConsume"),f=Symbol("kReading"),b=Symbol("kBody"),y=Symbol("abort"),m=Symbol("kContentType"),p=()=>{};async function S(e,t){var r;if($l2MzW$pythonversioncheck7ed1514ejs1.isDisturbed(e)||(r=e)[b]&&!0===r[b].locked||r[d])throw TypeError("unusable");return s(!e[d]),new Promise((r,s)=>{e[d]={type:t,stream:e,resolve:r,reject:s,length:0,body:[]},e.on("error",function(e){$(this[d],e)}).on("close",function(){null!==this[d].body&&$(this[d],new i)}),process.nextTick(_,e[d])})}function _(e){if(null===e.body)return;let{_readableState:t}=e.stream;for(let r of t.buffer)E(e,r);for(t.endEmitted?g(this[d]):e.stream.on("end",function(){g(this[d])}),e.stream.resume();null!=e.stream.read(););}function g(t){let{type:r,body:s,resolve:o,stream:n,length:a}=t;try{if("text"===r)o(u(Buffer.concat(s)));else if("json"===r)o(JSON.parse(Buffer.concat(s)));else if("arrayBuffer"===r){let e=new Uint8Array(a),t=0;for(let r of s)e.set(r,t),t+=r.byteLength;o(e.buffer)}else"blob"===r&&(e||(e=$23d1cdec594f9529$import$cd48bd974321eed$3b660928c86ff55c),o(new e(s,{type:n[m]})));$(t)}catch(e){n.destroy(e)}}function E(e,t){e.length+=t.length,e.body.push(t)}function $(e,t){null!==e.body&&(t?e.reject(t):e.resolve(),e.type=null,e.stream=null,e.resolve=null,e.reject=null,e.length=0,e.body=null)}n=class extends a{constructor({resume:e,abort:t,contentType:r="",highWaterMark:s=65536}){super({autoDestroy:!0,read:e,highWaterMark:s}),this._readableState.dataEmitted=!1,this[y]=t,this[d]=null,this[b]=null,this[m]=r,this[f]=!1}destroy(e){return this.destroyed?this:(e||this._readableState.endEmitted||(e=new i),e&&this[y](),super.destroy(e))}emit(e,...t){return"data"===e?this._readableState.dataEmitted=!0:"error"===e&&(this._readableState.errorEmitted=!0),super.emit(e,...t)}on(e,...t){return("data"===e||"readable"===e)&&(this[f]=!0),super.on(e,...t)}addListener(e,...t){return this.on(e,...t)}off(e,...t){let r=super.off(e,...t);return("data"===e||"readable"===e)&&(this[f]=this.listenerCount("data")>0||this.listenerCount("readable")>0),r}removeListener(e,...t){return this.off(e,...t)}push(e){return this[d]&&null!==e&&0===this.readableLength?(E(this[d],e),!this[f]||super.push(e)):super.push(e)}async text(){return S(this,"text")}async json(){return S(this,"json")}async blob(){return S(this,"blob")}async arrayBuffer(){return S(this,"arrayBuffer")}async formData(){throw new l}get bodyUsed(){return $l2MzW$pythonversioncheck7ed1514ejs1.isDisturbed(this)}get body(){return!this[b]&&(this[b]=h(this),this[d]&&(this[b].getReader(),s(this[b].locked))),this[b]}dump(e){let t=e&&Number.isFinite(e.limit)?e.limit:262144,r=e&&e.signal;if(r)try{if("object"!=typeof r||!("aborted"in r))throw new c("signal must be an AbortSignal");$l2MzW$pythonversioncheck7ed1514ejs3.throwIfAborted(r)}catch(e){return Promise.reject(e)}return this.closed?Promise.resolve(null):new Promise((e,s)=>{let o=r?$l2MzW$pythonversioncheck7ed1514ejs.addAbortListener(r,()=>{this.destroy()}):p;this.on("close",function(){o(),r&&r.aborted?s(r.reason||Object.assign(Error("The operation was aborted"),{name:"AbortError"})):e(null)}).on("error",p).on("data",function(e){(t-=e.length)<=0&&this.destroy()}).resume()})}};export{n as default};
//# sourceMappingURL=python-version-check.ce83c418.js.map
