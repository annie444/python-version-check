import i from"./python-version-check.329fae56.js";import t from"./python-version-check.54444555.js";import e from"./python-version-check.e046c214.js";var s={};let h=/^charset$/i;function r(t,s){let r,y=s.limits,_=s.parsedConType;this.boy=t,this.fieldSizeLimit=e(y,"fieldSize",1048576),this.fieldNameSizeLimit=e(y,"fieldNameSize",100),this.fieldsLimit=e(y,"fields",1/0);for(var a=0,n=_.length;a<n;++a)if(Array.isArray(_[a])&&h.test(_[a][0])){r=_[a][1].toLowerCase();break}void 0===r&&(r=s.defCharset||"utf8"),this.decoder=new i,this.charset=r,this._fields=0,this._state="key",this._checkingBytes=!0,this._bytesKey=0,this._bytesVal=0,this._key="",this._val="",this._keyTrunc=!1,this._valTrunc=!1,this._hitLimit=!1}r.detect=/^application\/x-www-form-urlencoded/i,r.prototype.write=function(i,e){let s,h,r;if(this._fields===this.fieldsLimit)return this.boy.hitFieldsLimit||(this.boy.hitFieldsLimit=!0,this.boy.emit("fieldsLimit")),e();let y=0,_=i.length;for(;y<_;)if("key"===this._state){for(s=h=void 0,r=y;r<_;++r){if(!this._checkingBytes&&++y,61===i[r]){s=r;break}if(38===i[r]){h=r;break}if(this._checkingBytes&&this._bytesKey===this.fieldNameSizeLimit){this._hitLimit=!0;break}this._checkingBytes&&++this._bytesKey}if(void 0!==s)s>y&&(this._key+=this.decoder.write(i.toString("binary",y,s))),this._state="val",this._hitLimit=!1,this._checkingBytes=!0,this._val="",this._bytesVal=0,this._valTrunc=!1,this.decoder.reset(),y=s+1;else if(void 0!==h){let s;++this._fields;let r=this._keyTrunc;if(s=h>y?this._key+=this.decoder.write(i.toString("binary",y,h)):this._key,this._hitLimit=!1,this._checkingBytes=!0,this._key="",this._bytesKey=0,this._keyTrunc=!1,this.decoder.reset(),s.length&&this.boy.emit("field",t(s,"binary",this.charset),"",r,!1),y=h+1,this._fields===this.fieldsLimit)return e()}else this._hitLimit?(r>y&&(this._key+=this.decoder.write(i.toString("binary",y,r))),y=r,(this._bytesKey=this._key.length)===this.fieldNameSizeLimit&&(this._checkingBytes=!1,this._keyTrunc=!0)):(y<_&&(this._key+=this.decoder.write(i.toString("binary",y))),y=_)}else{for(h=void 0,r=y;r<_;++r){if(!this._checkingBytes&&++y,38===i[r]){h=r;break}if(this._checkingBytes&&this._bytesVal===this.fieldSizeLimit){this._hitLimit=!0;break}this._checkingBytes&&++this._bytesVal}if(void 0!==h){if(++this._fields,h>y&&(this._val+=this.decoder.write(i.toString("binary",y,h))),this.boy.emit("field",t(this._key,"binary",this.charset),t(this._val,"binary",this.charset),this._keyTrunc,this._valTrunc),this._state="key",this._hitLimit=!1,this._checkingBytes=!0,this._key="",this._bytesKey=0,this._keyTrunc=!1,this.decoder.reset(),y=h+1,this._fields===this.fieldsLimit)return e()}else this._hitLimit?(r>y&&(this._val+=this.decoder.write(i.toString("binary",y,r))),y=r,(""===this._val&&0===this.fieldSizeLimit||(this._bytesVal=this._val.length)===this.fieldSizeLimit)&&(this._checkingBytes=!1,this._valTrunc=!0)):(y<_&&(this._val+=this.decoder.write(i.toString("binary",y))),y=_)}e()},r.prototype.end=function(){this.boy._done||("key"===this._state&&this._key.length>0?this.boy.emit("field",t(this._key,"binary",this.charset),"",this._keyTrunc,!1):"val"===this._state&&this.boy.emit("field",t(this._key,"binary",this.charset),t(this._val,"binary",this.charset),this._keyTrunc,this._valTrunc),this.boy._done=!0,this.boy.emit("finish"))},s=r;export{s as default};
//# sourceMappingURL=python-version-check.89a0ce5d.js.map
