import e from"./python-version-check.a30f15a5.js";import{queryIndex as n}from"./python-version-check.aa9c0888.js";import{getPackageInfo as t,getPackageVersion as o}from"./python-version-check.b938519f.js";async function r(){try{let r=$dCa9K$pythonversionchecka30f15a5js1.getInput("path"),s=$dCa9K$pythonversionchecka30f15a5js1.getInput("index");if(!r)return void $dCa9K$pythonversionchecka30f15a5js3.setFailed('Input "path" is required');if(!s)return void $dCa9K$pythonversionchecka30f15a5js3.setFailed('Input "index" is required');$dCa9K$pythonversionchecka30f15a5js.debug(`Looking for package at ${r}`);let f=await t(r),i=f.name;$dCa9K$pythonversionchecka30f15a5js.debug(`Found package: ${i}`);let a=await o(f);$dCa9K$pythonversionchecka30f15a5js.debug(`Found version: ${a}`),e.setOutput("package_name",i),e.setOutput("package_version",a),$dCa9K$pythonversionchecka30f15a5js.debug(`Querying ${s} for published versions`);let c=await n(s,i);if(null===c)return void $dCa9K$pythonversionchecka30f15a5js3.setFailed(`Failed to query index ${s}`);$dCa9K$pythonversionchecka30f15a5js2.info(`Published versions for ${i}: ${c.join(", ")}`);let d=c.length>0&&c.includes(a);e.setOutput("current_version_exists",d)}catch(e){try{if("object"!=typeof e||null===e||!("message"in e)||"string"!=typeof e.message)throw TypeError("The error does not have a message property");$dCa9K$pythonversionchecka30f15a5js3.setFailed(e.message)}catch{$dCa9K$pythonversionchecka30f15a5js3.setFailed(`An unknown error occurred: ${String(e)}`)}}}export{r as run};
//# sourceMappingURL=python-version-check.086e2a9d.js.map
