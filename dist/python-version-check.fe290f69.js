import e from"./python-version-check.e046c214.js";import i from"./python-version-check.2d65d83f.js";import{EventEmitter as t}from"node:events";import{inherits as s}from"node:util";var r={};let a=Buffer.from("\r\n\r\n"),h=/\r\n/g,n=/^([^:]+):[ \t]?([\x00-\xFF]+)?$/;function d(s){t.call(this),s=s||{};let r=this;this.nread=0,this.maxed=!1,this.npairs=0,this.maxHeaderPairs=e(s,"maxHeaderPairs",2e3),this.maxHeaderSize=e(s,"maxHeaderSize",81920),this.buffer="",this.header={},this.finished=!1,this.ss=new i(a),this.ss.on("info",function(e,i,t,s){i&&!r.maxed&&(r.nread+s-t>=r.maxHeaderSize?(s=r.maxHeaderSize-r.nread+t,r.nread=r.maxHeaderSize,r.maxed=!0):r.nread+=s-t,r.buffer+=i.toString("binary",t,s)),e&&r._finish()})}s(d,t),d.prototype.push=function(e){let i=this.ss.push(e);if(this.finished)return i},d.prototype.reset=function(){this.finished=!1,this.buffer="",this.header={},this.ss.reset()},d.prototype._finish=function(){this.buffer&&this._parseHeader(),this.ss.matches=this.ss.maxMatches;let e=this.header;this.header={},this.buffer="",this.finished=!0,this.nread=this.npairs=0,this.maxed=!1,this.emit("header",e)},d.prototype._parseHeader=function(){let e,i;if(this.npairs===this.maxHeaderPairs)return;let t=this.buffer.split(h),s=t.length;for(var r=0;r<s;++r){if(0===t[r].length)continue;if(("	"===t[r][0]||" "===t[r][0])&&i){this.header[i][this.header[i].length-1]+=t[r];continue}let s=t[r].indexOf(":");if(-1===s||0===s)return;if(i=(e=n.exec(t[r]))[1].toLowerCase(),this.header[i]=this.header[i]||[],this.header[i].push(e[2]||""),++this.npairs===this.maxHeaderPairs)break}},r=d;export{r as default};
//# sourceMappingURL=python-version-check.fe290f69.js.map
